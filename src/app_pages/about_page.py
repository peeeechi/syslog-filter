# app_pages/about_page.py
import streamlit as st

def run():
    st.title("このアプリケーションについて")
    st.write("""
        このSyslog Filterアプリケーションは、様々な形式のSyslogファイルをアップロードし、
        柔軟なフィルタリングや抽出機能を通じてログを効率的に分析することを目的としています。
        """)
    st.write("---")
    st.subheader("アプリケーションの概要")
    st.markdown("""
    本アプリケーションは、以下の原則に基づいて構築されています：
    * **モジュール性と拡張性**: 各機能は独立したページとして管理され、将来的な機能追加やメンテナンスが容易です。
    * **単一コマンド起動**: `streamlit run src/app.py` という一つのコマンドで全ての機能にアクセスできます。
    * **半自動化されたワークフロー**: 「データ読み込み」ページでファイルをアップロードした後、自動的に次の分析ページに移動します。
    * **堅牢なモジュールインポート**: `src/app.py` がプロジェクトルートをPythonパスに自動的に追加するため、モジュールインポートがより安定しています。
    * **元の `app.py` からの移行**: オリジナルの `app.py` の機能は、新しいモジュール化された構造に完全に移行されており、この実行環境には含まれていません。
    """)
    st.write("---")
    st.subheader("提供機能一覧")
    st.markdown("""
    #### データ読み込みページ
    * **多形式ファイルアップロードの集中管理**: `.log` および `.txt` ファイルに加え、**`.zip` 形式の圧縮ファイルをサポート**します。全てのログデータは、この「データ読み込み」ページで一度だけアップロード・処理されます。
    * **自動ファイル展開**:
        * アップロードされた `.zip` ファイルを自動的に展開します。
        * 展開されたディレクトリ内に含まれる **`.zst` 圧縮ファイルも自動的に展開**します。
    * **ログファイル選択の自動化/手動化**:
        * 展開されたログファイルが1つのみの場合、自動的にそのファイルを読み込みます。
        * 複数の `.log` ファイルが見つかった場合は、ドロップダウンリストから分析対象のファイルを**手動で選択**できます。
    * **効率的なログパース**: `YYYY-MM-DDTHH:MM:SS.ffffff+HH:MM hostname app_name[PID]: message` 形式のSyslogを解析し、ANSIエスケープシーケンスを自動除去します。

    #### 共通機能
    * **一時ファイルのクリーンアップ**: アップロードおよび展開された一時ファイルを、サイドバーのボタンから手動で完全に削除できます（`temp_syslog_upload` ディレクトリごと）。
    * **読み込みデータ共有**: 一度「データ読み込み」ページで読み込んだログデータは、他の全ての分析ページで共通して利用されます。これにより、**ファイルを複数回アップロードする手間が省けます。**

    #### 「日時指定・抽出」ページ
    * **日付範囲の指定**: ログデータ内に存在する日付の範囲内で、**開始日と終了日をそれぞれ指定**し、日付範囲でログを抽出できます。
    * **時刻範囲のより詳細な指定**: **「時」と「分」を個別に設定**でき、**分は1分単位**で指定可能です。
    * **設定の保持**: 一度指定した日時設定は、ページ移動後も保持され、再度ページにアクセスした際に自動的に復元されます。
    * **抽出結果のダウンロード形式選択**: 抽出されたログデータを、**CSV形式**または**元のSyslog形式に近いLOG形式**のいずれかでダウンロードできます。

    #### 「キーワードフィルタリング」ページ
    * **キーワード検索**: ログメッセージ内容を、入力されたキーワードでフィルタリングします。複数のキーワードをスペース区切りで入力すると、全てのキーワードを含むログが抽出されます。
    * **日時による抽出**: このページでは、**「日時指定・抽出」ページで絞り込まれたデータを対象**とします。設定された日時範囲がページ上で表示されます。
    * **表示行数のカスタマイズ**: 結果表示の最大行数をスライダーで調整できます。
    * **結果のダウンロード**: フィルタリングされたログデータをCSV形式でダウンロードできます。

    """)
    st.write("---")
    st.info("このアプリケーションは、[peeeechi/syslog-filter](https://github.com/peeeechi/syslog-filter) をベースに開発されています。")